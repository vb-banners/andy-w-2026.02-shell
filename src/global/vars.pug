//- ========================================
//- PROJECT CONFIGURATION (from banner.config.js)
//- ========================================
- var mainSet = config.project.name
- var projectTitle = config.project.title
- var v = Date.now()

//- Links (false to disable)
- var logoLink = config.project.logoLink
- var footerLink = config.project.footerLink

//- Footer content
- var footerCopyright = config.project.footer.copyright
- var footerYear = config.project.footer.year
- var footerCompany = config.project.footer.company
- var footerFullText = `${footerCopyright} ${footerYear} ${footerCompany}`

//- Preview settings
- var showWholePackageDownload = config.preview.showWholePackageDownload
- var enablePreviewPreloading = config.preview.enablePreloading

//- ========================================
//- SETS
//- ========================================
- var setFleet = mainSet + '-fleet-solutions'
- var titleFleet = 'Fleet Solutions'

//- ========================================
//- MIXINS - Header
//- ========================================

mixin header
  header
    .topline
      a.logo-link(href=(logoLink || '#') target=(logoLink ? "_blank" : null) aria-label=(logoLink ? 'Open site' : 'Reload page') data-reload=(logoLink ? null : '1'))
        svg.logo(viewBox='0 0 38 35' xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2')
          path(fill='none' stroke='#fff' stroke-width='.85' d='M16.765 32.625H7.994l-.812-6.501-5.32-3.87a17.233 17.233 0 0 1-.35-3.457c0-9.541 7.744-17.284 17.284-17.284 9.542 0 17.285 7.743 17.285 17.284 0 1.161-.117 2.319-.349 3.457l-5.319 3.87-.814 6.501h-8.771l-.507.368c-.906.66-2.143.66-3.05 0l-.506-.368Z')
          path(fill='#ffc30c' fill-rule='nonzero' d='M16.765 32.625H7.994l-.812-6.501-5.32-3.87a17.233 17.233 0 0 1-.35-3.457c0-9.541 7.744-17.284 17.284-17.284 9.542 0 17.285 7.743 17.285 17.284 0 1.161-.117 2.319-.349 3.457l-5.319 3.87-.814 6.501h-8.771l-.507.368c-.906.66-2.143.66-3.05 0l-.506-.368Z')
          path(fill='#ec1c24' d='M17.039 29.6h-6.375l-.645-5.152-5.251-3.819a7.375 7.375 0 0 1 .406-4.827l9.298 9.401-9.039-11.158a7.35 7.35 0 0 1 2.257-3.741l8.103 13.985L8.614 8.978a7.347 7.347 0 0 1 3.701-2.604l4.954 17.359-3.62-18.075a7.35 7.35 0 0 1 4.409-.904l.738 18.797.738-18.797a7.346 7.346 0 0 1 4.408.904l-3.619 18.075 4.955-17.359a7.356 7.356 0 0 1 3.701 2.604l-7.18 15.311 8.102-13.985a7.346 7.346 0 0 1 2.258 3.741L23.12 25.203l9.297-9.401a7.337 7.337 0 0 1 .406 4.827l-5.25 3.819-.645 5.152h-6.375l-.943.686a1.385 1.385 0 0 1-1.627 0l-.944-.686Zm-.274 3.025H7.993l-.812-6.501-5.32-3.87a17.305 17.305 0 0 1-.349-3.457c0-9.541 7.744-17.284 17.284-17.284 9.541 0 17.284 7.743 17.284 17.284 0 1.161-.116 2.319-.349 3.457l-5.319 3.87-.813 6.501h-8.771l-.507.368a2.6 2.6 0 0 1-3.05 0l-.506-.368Z')
          path(fill='#fff' fill-rule='nonzero' d='m35.733 22.253-5.32 3.87-.813 6.501h-8.771l-.507.368c-.907.66-2.143.66-3.05 0l-.507-.368H7.994l-.812-6.501-5.32-3.87a17.305 17.305 0 0 1-.349-3.457c0-9.54 7.744-17.284 17.284-17.284 9.541 0 17.284 7.744 17.284 17.284 0 1.162-.116 2.319-.348 3.457M18.797 0C8.433 0 0 8.432 0 18.796c0 1.259.128 2.524.38 3.759l.117.576 5.265 3.829.897 7.176h9.615l.107.077a4.077 4.077 0 0 0 2.416.787 4.067 4.067 0 0 0 2.412-.785l.11-.079h9.615l.897-7.176 5.267-3.829.117-.577c.251-1.235.378-2.5.378-3.758C37.593 8.432 29.161 0 18.797 0')

      .controls
        .loading-overlay
          span.loading-label
            span.loading-spinner
            |  Loading bannersâ€¦
        +restartAllButton()
        +forwardAllButton()
        +downloadButton()

    .setsline
      +rootSetPreviewButton(setFleet, titleFleet)

//- ========================================
//- COLORS
//- ========================================

//- Banner
- var bannerBgColor = '#fff'

//- Main colors
- var lightMainColor = '#4A4A4A'
- var lightActiveColor = '#ec1c24'

- var darkMainColor = '#fff'
- var darkActiveColor = '#ec1c24'

//- Body/Header
- var lightBodyColor = '#F6F6FF'
- var lightHeaderColor = '#fff'

- var darkBodyColor = '#1D232B'
- var darkHeaderColor = '#1D232B'

//- Logo
- var lightLogoMainColor = '#fff'
- var darkLogoMainColor = '#fff'
- var lightLogoSecondaryColor = '#1D232B'
- var darkLogoSecondaryColor = '#fff'


//- Iframe controls
- var lightIframeText = '#999'
- var lightIframeHoverText = '#666'

- var darkIframeText = '#999'
- var darkIframeHoverText = '#fff'

//- Toggle buttons
- var lightToggleBg = '#ffc30c'
- var lightToggleIcon = '#ec1c24'

- var lightToggleHoverBg = '#ec1c24'
- var lightToggleHoverIcon = '#ffc30c'

- var darkToggleBg = '#ec1c24'
- var darkToggleIcon = '#ffc30c'

- var darkToggleHoverBg = '#ffc30c'
- var darkToggleHoverIcon = '#ec1c24'

//- Menu
- var lightMenuBg = '#fff'
- var lightMenuBorder = '#fff'

- var darkMenuBg = '#1D232B'
- var darkMenuBorder = '#1D232B'

//- Footer
- var lightFooterBgColor = '#1D232B'
- var lightFooterTextColor = '#fff'
- var lightFooterLinkColor = '#ffc30c'

- var darkFooterBgColor = '#1D232B'
- var darkFooterTextColor = '#fff'
- var darkFooterLinkColor = '#ffc30c'

//- Borders
- var lightBorderColor = '#e5e7eb'
- var lightBorderLightColor = '#ddd'
- var lightSeparatorColor = '#f5f5f5'

- var darkBorderColor = '#333'
- var darkSeparatorColor = '#444'

//- ========================================
//- MIXINS - Banner Iframes
//- ========================================

mixin iframe(set, size, isInline)
  .frame(class=isInline ? 'inline' : null data-id=`${set}-${size}`)
    .size #{size}
    .frame-box
      iframe(class=`c${size}` src=`${set}-${size}/index.html?v=${v}`)
      a.download-btn(href=`${set}-${size}.zip` download=`${set}-${size}.zip` aria-label=`Download ${set}-${size}.zip`)
        i.bi.bi-file-earmark-arrow-down
      a.forward-btn.is-playing(href='#' aria-label='Pause banner')
        i.bi.bi-pause-fill
      a.restart-btn(href='#' aria-label='Restart banner')
        i.bi.bi-arrow-clockwise

mixin inlineIframe(set, size)
  +iframe(set, size, true)

//- ========================================
//- MIXINS - Style Blocks
//- ========================================

//- CSS Custom Properties for theming
mixin themeVariables()
  style.
    :root {
      --mainColor: #{lightMainColor};
      --activeColor: #{lightActiveColor};
      --logo-main-color: #{lightLogoMainColor};
      --logo-secondary-color: #{lightLogoSecondaryColor};
      --border: #{lightBorderColor};
      --white-color: #{'#fff'};
      --light-border-color: #{lightBorderLightColor};
      --separator-light-color: #{lightSeparatorColor};
      --hover-light-bg-color: #{lightActiveColor};
      --footer-link-color: #{lightFooterLinkColor};
      --shadow-banner-control: #{shadows.bannerControl};
      --shadow-dropdown: #{shadows.dropdown};
      --shadow-modal: #{shadows.modal};
      --shadow-header: #{shadows.header};
      --shadow-banner-control-hover: #{shadows.bannerControlHover};
      --shadow-dark-theme: #{shadows.darkTheme};
      --shadow-loading-shimmer: #{shadows.loadingShimmer};
      --shadow-loading-shimmer-dark: #{shadows.loadingShimmerDark};
      --shadow-tooltip: #{shadows.tooltip};
      --shadow-focus-ring: #{shadows.focusRing};
      --text-shadow-sharp: #{shadows.textSharp};
      --spinner-border: #{lightSpinnerBorderColor};
      --spinner-top: #{lightSpinnerTopColor};
      --shimmer-base: #{lightShimmerBase};
      --shimmer-peak: #{lightShimmerPeak};
      --shimmer-border: #{lightShimmerBorder};
      --shimmer-shadow: var(--shadow-loading-shimmer);
    }

//- Base layout styles (body, header, footer)
mixin baseLayoutStyles()
  style.
    body {background-color: #{lightBodyColor}}
    header {background-color: #{lightHeaderColor}}
    footer {background-color: #{lightFooterBgColor} !important; color: #{lightFooterTextColor} !important; border-top: 1px solid #{lightBorderColor} !important;}
    footer a, footer a.small, footer a *, footer span, footer #year, footer span#year {color: #{lightFooterTextColor} !important;}
    footer a:hover, footer a:hover *, footer a:hover span {color: #{lightFooterLinkColor} !important;}

//- Shimmer animation styles
mixin shimmerStyles()
  style.
    /* Subtle shimmer placeholders until ready */
    body:not(.banners-ready) .frame-box iframe { opacity: 0 }
    body:not(.banners-ready) .frame-box .download-btn,
    body:not(.banners-ready) .frame-box .restart-btn,
    body:not(.banners-ready) .frame-box .forward-btn { opacity: 0; pointer-events: none }
    /* Individual iframe restart shimmer */
    .frame-box.restarting iframe { opacity: 0 }
    .frame-box.restarting .download-btn,
    .frame-box.restarting .restart-btn,
    .frame-box.restarting .forward-btn { opacity: 0; pointer-events: none }
    .frame-box::before {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(90deg, var(--shimmer-base) 25%, var(--shimmer-peak) 37%, var(--shimmer-base) 63%);
      background-size: 400% 100%;
      animation: shimmer #{timing.shimmerDuration} ease-in-out infinite;
      box-shadow: var(--shimmer-shadow), inset 0 0 0 1px var(--shimmer-border);
      transition: opacity #{timing.transitionMedium} ease;
      z-index: 2;
    }
    body.banners-ready .frame-box:not(.restarting)::before { opacity: 0; pointer-events: none }
    body.preloading-disabled .frame-box::before { content: none !important; display: none !important; box-shadow: none !important }
    body.preloading-disabled .loading-overlay .loading-label { display: none !important }
    @keyframes shimmer {
      0% { background-position: 100% 0 }
      100% { background-position: 0 0 }
    }
    @keyframes spin { to { transform: rotate(360deg) } }

//- Iframe control styles
mixin iframeControlStyles()
  style.
    .frame-box {
      position: relative;
    }
    .frame-box iframe {
      pointer-events: auto;
      -webkit-user-drag: none;
      -khtml-user-drag: none;
      -moz-user-drag: none;
      -o-user-drag: none;
      user-drag: none;
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
      touch-action: none;
      draggable: false;
      overflow: hidden;
    }
    .frame-box .download-btn,
    .frame-box .restart-btn,
    .frame-box .forward-btn {
      z-index: 5;
    }
    .frame .download-btn,
    .frame .restart-btn,
    .frame .forward-btn { background-color: #{lightToggleBg}; color: #{lightToggleIcon} }
    .frame .download-btn .bi,
    .frame .restart-btn .bi,
    .frame .forward-btn .bi { color: #{lightToggleIcon} }
    .frame .forward-btn.is-playing { background-color: #{lightToggleHoverBg}; color: #{lightToggleHoverIcon} }
    .frame .download-btn:hover,
    .frame .restart-btn:hover,
    .frame .forward-btn:hover { background-color: #{lightToggleHoverBg}; color: #{lightToggleHoverIcon} }
    .frame .download-btn:hover .bi,
    .frame .restart-btn:hover .bi,
    .frame .forward-btn:hover .bi,
    .frame .forward-btn.is-playing .bi { color: #{lightToggleHoverIcon} }
    body.iframe-controls-hidden .frame-box .download-btn,
    body.iframe-controls-hidden .frame-box .restart-btn,
    body.iframe-controls-hidden .frame-box .forward-btn {
      opacity: 0 !important;
      pointer-events: none !important;
      transform: translateY(10px) !important;
    }

//- Toggle button styles (bottom floating buttons)
mixin toggleButtonStyles()
  style.
    .iframe-controls-toggle {
      position: fixed;
      bottom: 40px;
      right: 20px;
      z-index: 1050;
      width: 48px;
      height: 48px;
      border-radius: 50%;
      background-color: #{lightToggleBg};
      border: none;
      box-shadow: var(--shadow-dropdown);
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all #{timing.transitionSlow} ease;
      color: #{lightToggleIcon};
    }
    .iframe-controls-toggle:hover {
      background-color: #{lightToggleHoverBg};
      box-shadow: var(--shadow-modal);
      transform: translateY(-2px);
      color: #{lightToggleHoverIcon};
    }
    .iframe-controls-toggle .bi {
      font-size: 20px;
      transition: transform 0.2s ease;
      color: inherit;
    }
    .iframe-controls-toggle.active .bi {
      transform: scale(1.1);
    }
    .dark-theme-toggle {
      position: fixed;
      bottom: 40px;
      right: 80px;
      z-index: 1050;
      width: 48px;
      height: 48px;
      border-radius: 50%;
      background-color: #{lightToggleBg};
      border: none;
      box-shadow: var(--shadow-dropdown);
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all #{timing.transitionSlow} ease;
      color: #{lightToggleIcon};
    }
    .dark-theme-toggle:hover {
      background-color: #{lightToggleHoverBg};
      box-shadow: var(--shadow-modal);
      transform: translateY(-2px);
      color: #{lightToggleHoverIcon};
    }
    .dark-theme-toggle .bi {
      font-size: 20px;
      transition: transform 0.2s ease;
      color: inherit;
    }
    .dark-theme-toggle.active .bi {
      transform: scale(1.1);
    }

//- Tooltip/hover label styles
mixin tooltipStyles()
  style.
    .iframe-controls-toggle::after {
      content: attr(data-label);
      position: absolute;
      right: 0;
      bottom: 100%;
      transform: translate(0, -8px);
      font-size: 11px;
      line-height: 1.3;
      font-weight: 500;
      white-space: nowrap;
      color: #fff;
      background-color: rgba(0, 0, 0, 0.85);
      padding: 5px 8px;
      border-radius: 4px;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.2s ease, transform 0.2s ease;
      z-index: 1060;
      box-shadow: var(--shadow-tooltip);
    }
    .dark-theme-toggle::after {
      content: attr(data-label);
      position: absolute;
      right: 0;
      bottom: 100%;
      transform: translate(0, -8px);
      font-size: 11px;
      line-height: 1.3;
      font-weight: 500;
      white-space: nowrap;
      color: #fff;
      background-color: rgba(0, 0, 0, 0.85);
      padding: 5px 8px;
      border-radius: 4px;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.2s ease, transform 0.2s ease;
      z-index: 1060;
      box-shadow: var(--shadow-tooltip);
    }
    .iframe-controls-toggle:hover::after,
    .iframe-controls-toggle:focus-visible::after {
      opacity: 1;
      transform: translate(0, -12px);
    }
    .dark-theme-toggle:hover::after,
    .dark-theme-toggle:focus-visible::after {
      opacity: 1;
      transform: translate(0, -12px);
    }
    .topline .controls a.forward-all::after,
    .topline .controls a.restart-all::after,
    .topline .controls a[download]::after {
      content: attr(data-label);
      position: absolute;
      left: 50%;
      top: 100%;
      transform: translate(-50%, -5px);
      font-size: 9.5px;
      line-height: 1;
      font-weight: 600;
      white-space: nowrap;
      color: inherit;
      opacity: 0;
      pointer-events: none;
      transition: opacity #{timing.transitionFast} ease, transform #{timing.transitionFast} ease;
    }
    .topline .controls a.forward-all:hover::after,
    .topline .controls a.forward-all:focus-visible::after,
    .topline .controls a.restart-all:hover::after,
    .topline .controls a.restart-all:focus-visible::after,
    .topline .controls a[download]:hover::after,
    .topline .controls a[download]:focus-visible::after {
      opacity: 1;
    }
    .topline .controls a.is-hover::after,
    .topline .controls a.active-click::after { opacity: 1 }

//- Dark theme styles
mixin darkThemeStyles()
  style.
    body.dark-theme {
      background-color: #{darkBodyColor} !important;
      --logo-main-color: #{darkLogoMainColor};
      --logo-secondary-color: #{darkLogoSecondaryColor};
      --spinner-border: #{darkSpinnerBorderColor};
      --spinner-top: #{darkSpinnerTopColor};
      --shimmer-base: #{darkShimmerBase};
      --shimmer-peak: #{darkShimmerPeak};
      --shimmer-border: #{darkShimmerBorder};
      --shimmer-shadow: var(--shadow-loading-shimmer-dark);
      --hover-light-bg-color: #{darkActiveColor};
    }
    body.dark-theme header {
      background-color: #{darkHeaderColor} !important;
      border-bottom: 1px solid #{darkBorderColor};
    }
    body.dark-theme .topline .controls a {
      background-color: #{darkMainColor} !important;
      color: #{'#fff'} !important;
    }
    body.dark-theme .topline .controls a:hover {
      background-color: #{darkActiveColor} !important;
      color: #{'#fff'} !important;
    }
    body.dark-theme .topline .controls a.restart-all,
    body.dark-theme .topline .controls a.forward-all,
    body.dark-theme .topline .controls a[download] {
      background-color: transparent !important;
      color: #{darkMainColor} !important;
    }
    body.dark-theme .topline .controls a.restart-all:hover,
    body.dark-theme .topline .controls a.forward-all:hover,
    body.dark-theme .topline .controls a[download]:hover {
      color: #{darkActiveColor} !important;
    }
    body.dark-theme .topline .controls a.forward-all.is-playing {
      color: #{darkActiveColor} !important;
    }
    body.dark-theme .download-main-btn {
      color: #{darkMainColor} !important;
      background-color: transparent !important;
    }
    body.dark-theme .download-main-btn:hover {
      background-color: transparent !important;
      color: #{darkActiveColor} !important;
    }
    body.dark-theme .download-popup-wrapper:hover .download-main-btn,
    body.dark-theme .download-popup-wrapper.active .download-main-btn {
      background-color: transparent !important;
      color: #{darkActiveColor} !important;
    }
    body.dark-theme .download-popup-menu {
      background: #{darkMenuBg} !important;
      border: 1px solid #{darkMenuBorder} !important;
      box-shadow: var(--shadow-dark-theme) !important;
    }
    body.dark-theme .download-option {
      color: #e0e0e0 !important;
      border-bottom-color: #{darkMenuBorder} !important;
    }
    body.dark-theme .download-option:hover {
      background-color: #{darkActiveColor} !important;
      color: #{darkMainColor} !important;
    }
    body.dark-theme .dropdown-separator {
      background-color: #{darkSeparatorColor} !important;
    }
    body.dark-theme .loading-overlay .loading-label {
      color: #{darkMainColor} !important;
    }
    body.dark-theme .loading-overlay .loading-label .loading-spinner {
      border: 3px solid var(--spinner-border) !important;
      border-top-color: var(--spinner-top) !important;
    }
    body.dark-theme .setsline a.index,
    body.dark-theme .setsline a.set {
      color: #{darkMainColor} !important;
    }
    body.dark-theme .setsline a.index:hover,
    body.dark-theme .setsline a.set:hover {
      color: #{darkActiveColor} !important;
    }
    body.dark-theme .setsline a.set.is-active,
    body.dark-theme .setsline a.index.is-active {
      color: #{darkActiveColor} !important;
    }
    body.dark-theme .frame {
      color: #{darkIframeText} !important;
      background-color: #2d2d2d;
    }
    body.dark-theme .frame:hover {
      background-color: #353535;
    }
    body.dark-theme .frame:hover :where(*) {
      color: #{darkIframeHoverText};
    }
    body.dark-theme .frame .size {
      color: #{darkIframeText} !important;
    }
    body.dark-theme .frame:hover .size {
      color: #{darkIframeHoverText} !important;
    }
    body.dark-theme .frame .download-btn,
    body.dark-theme .frame .restart-btn,
    body.dark-theme .frame .forward-btn {
      background-color: #{darkToggleBg};
      color: #{darkToggleIcon};
    }
    body.dark-theme .frame .download-btn .bi,
    body.dark-theme .frame .restart-btn .bi,
    body.dark-theme .frame .forward-btn .bi { color: inherit }
    body.dark-theme .frame .download-btn:hover,
    body.dark-theme .frame .restart-btn:hover,
    body.dark-theme .frame .forward-btn:hover {
      background-color: #{darkToggleHoverBg};
      color: #{darkToggleHoverIcon};
    }
    body.dark-theme .frame .forward-btn.is-playing {
      background-color: #{darkToggleHoverBg};
      color: #{darkToggleHoverIcon};
    }
    body.dark-theme footer {
      background-color: #{darkFooterBgColor} !important;
      color: #{darkFooterTextColor} !important;
      border-top: 1px solid #{darkBorderColor} !important;
    }
    body.dark-theme footer a, body.dark-theme footer a.small, body.dark-theme footer a *, body.dark-theme footer span, body.dark-theme footer #year, body.dark-theme footer span#year {
      color: #{darkFooterTextColor} !important;
    }
    body.dark-theme footer a:hover, body.dark-theme footer a:hover *, body.dark-theme footer a:hover span {
      color: #{darkFooterLinkColor} !important;
    }
    body.dark-theme .dark-theme-toggle {
      background-color: #{darkToggleBg} !important;
      color: #{darkToggleIcon} !important;
    }
    body.dark-theme .dark-theme-toggle:hover {
      background-color: #{darkToggleHoverBg} !important;
      color: #{darkToggleHoverIcon} !important;
    }
    body.dark-theme .iframe-controls-toggle {
      background-color: #{darkToggleBg} !important;
      color: #{darkToggleIcon} !important;
    }
    body.dark-theme .iframe-controls-toggle:hover {
      background-color: #{darkToggleHoverBg} !important;
      color: #{darkToggleHoverIcon} !important;
    }
    body.dark-theme.banners-ready .frame-box:not(.restarting)::before { opacity: 0 !important; pointer-events: none !important }
    body.dark-theme .iframe-controls-toggle::after,
    body.dark-theme .dark-theme-toggle::after {
      background-color: rgba(255, 255, 255, 0.9);
      color: #333;
    }
    body.dark-theme .setsline { scrollbar-color: #{darkActiveColor} transparent }
    body.dark-theme .setsline::-webkit-scrollbar-thumb { background-color: #{darkActiveColor} }

//- Header control styles
mixin headerControlStyles()
  style.
    .topline .controls a {background-color: #{lightMainColor}; color: #{'#fff'}}
    .topline .controls a:hover {background-color: #{lightActiveColor} !important; color: #{'#fff'};}
    .frame {color: #{lightIframeText}}
    main > section { text-align: left }
    main > section .container { max-width: none; width: 100%; margin-left: 0; margin-right: 0; padding-left: 0; padding-right: 0 }
    .frame:hover :where(*) { color: #{lightIframeHoverText} }
    .topline .controls a.restart-all, .topline .controls a.forward-all, .topline .controls a[download] { position: relative; background-color: transparent !important; color: #{lightMainColor}; box-shadow: none }
    .topline .controls a.restart-all:hover, .topline .controls a.forward-all:hover, .topline .controls a[download]:hover { background-color: transparent !important; color: #{lightActiveColor} }
    .topline .controls a.forward-all.is-playing { color: #{lightActiveColor} }
    .topline .controls a.forward-all.is-disabled { opacity: .5; pointer-events: none; cursor: default }
    .topline .controls a.forward-all:active i.bi,
    .topline .controls a.forward-all.active-click i.bi { transform: none }
    .setsline a.index,
    .setsline a.set { background-color: transparent !important; color: #{lightMainColor}; box-shadow: none; text-decoration: none }
    .setsline a.index:hover,
    .setsline a.set:hover { background-color: transparent !important; color: #{lightActiveColor} }
    .setsline a.set.is-active,
    .setsline a.index.is-active { color: #{lightActiveColor}; text-decoration: underline; text-underline-offset: 3px; text-decoration-thickness: 2px }
    .setsline { scrollbar-width: thin; scrollbar-color: #{lightActiveColor} transparent }
    .setsline::-webkit-scrollbar { height: 1px }
    .setsline::-webkit-scrollbar-track { background: transparent }
    .setsline::-webkit-scrollbar-thumb { background-color: #{lightActiveColor}; border-radius: 999px }
    .setsline.loading-scroll { scrollbar-width: none; overflow: hidden }
    .setsline.loading-scroll::-webkit-scrollbar { display: none }
    .frame .size {
      background-color: transparent !important;
      backdrop-filter: none !important;
      -webkit-backdrop-filter: none !important;
      color: #{lightIframeText} !important;
    }
    .frame:hover .size {
      color: #{lightIframeHoverText} !important;
    }
    .frame {
      background: transparent !important;
    }
    .frame-container {
      background: transparent !important;
    }

//- Loading overlay styles
mixin loadingOverlayStyles()
  style.
    .topline { position: relative }
    .loading-overlay {
      position: absolute;
      z-index: 10;
      top: 8px;
      pointer-events: none;
      text-align: center;
      width: auto;
    }
    .setsline .loading-label,
    .loading-overlay .loading-label { display: none; align-items: center; gap: 8px; font-size: 15px; font-weight: 600; color: #{lightMainColor}; user-select: none; white-space: nowrap }
    .setsline .loading-label .loading-spinner,
    .loading-overlay .loading-label .loading-spinner { width: 20px; height: 20px; border-radius: 50%; border: 3px solid var(--spinner-border); border-top-color: var(--spinner-top); animation: spin 0.9s linear infinite; display: inline-block }
    body.sync-mode:not(.banners-ready) .loading-overlay .loading-label { display: inline-flex }
    body:not(.banners-ready) .loading-overlay .loading-label { display: inline-flex }
    body.sync-mode:not(.banners-ready) .topline .controls a.forward-all { opacity: 0 !important; pointer-events: none !important }
    body.sync-mode:not(.banners-ready) .topline .controls a.restart-all { opacity: 0 !important; pointer-events: none !important }
    body.sync-mode:not(.banners-ready) .topline .controls .download-popup-wrapper { opacity: 0 !important; pointer-events: none !important }
    body:not(.banners-ready) .topline .controls a.forward-all { opacity: 0 !important; pointer-events: none !important }
    body:not(.banners-ready) .topline .controls a.restart-all { opacity: 0 !important; pointer-events: none !important }
    body:not(.banners-ready) .topline .controls .download-popup-wrapper { opacity: 0 !important; pointer-events: none !important }
    body.sync-mode:not(.banners-ready) .setsline a { opacity: 0; pointer-events: none }

//- Download popup styles
mixin downloadPopupStyles()
  style.
    .download-popup-menu {
      background: #{lightMenuBg} !important;
      border: 1px solid #{lightMenuBorder} !important;
    }
    .download-option {
      border-bottom-color: #{lightMenuBorder} !important;
    }

//- Mobile/touch styles
mixin mobileStyles()
  style.
    @media (pointer: coarse), (hover: none), (max-width: 640px) {
      .topline { padding-top: 10px }
      .setsline { padding-top: 10px; padding-bottom: 20px }
      .topline .controls { gap: 20px }
      .frame-box .download-btn,
      .frame-box .restart-btn,
      .frame-box .forward-btn { opacity: 1; pointer-events: auto; transform: translateY(0) }
      .frame-box .forward-btn.is-disabled { opacity: .5; pointer-events: none }
      .forward-btn:not(.is-playing) { background-color: #{lightToggleBg}; color: #{lightToggleIcon} }
      .forward-btn.is-playing { background-color: #{lightToggleHoverBg}; color: #{lightToggleHoverIcon} }
      .topline .controls a.forward-all { color: #{lightMainColor} }
      .topline .controls a.forward-all:hover { color: #{lightMainColor} }
      .topline .controls a.forward-all.is-playing { color: #{lightActiveColor} }
      .frame-box iframe {
        pointer-events: auto !important;
        touch-action: none !important;
        -webkit-touch-callout: none;
        -webkit-tap-highlight-color: transparent;
        overflow: hidden !important;
      }
      .topline .controls a.forward-all { color: #{lightMainColor} !important }
      .topline .controls a.forward-all:hover,
      .topline .controls a.forward-all:active,
      .topline .controls a.forward-all.is-hover,
      .topline .controls a.forward-all.active-click,
      .topline .controls a.forward-all:focus-visible { color: #{lightMainColor} !important }
      .topline .controls a.forward-all.is-playing { color: #{lightActiveColor} !important }
      .topline .controls a.forward-all::after { opacity: 0 !important }
      .topline .controls a.restart-all,
      .topline .controls a[download] { color: #{lightMainColor} !important }
      .topline .controls a.restart-all:hover,
      .topline .controls a.restart-all:active,
      .topline .controls a.restart-all.is-hover,
      .topline .controls a.restart-all.active-click,
      .topline .controls a.restart-all:focus-visible,
      .topline .controls a[download]:hover,
      .topline .controls a[download]:active,
      .topline .controls a[download].is-hover,
      .topline .controls a[download].active-click,
      .topline .controls a[download]:focus-visible { color: #{lightMainColor} !important }
      .topline .controls a.restart-all::after,
      .topline .controls a[download]::after { opacity: 0 !important }
      .topline .controls a.is-hover::after,
      .topline .controls a.active-click::after { opacity: 0 !important }
      .topline .controls a.restart-all.active-click,
      .topline .controls a[download].active-click { color: #{lightActiveColor} !important }
    }

//- ========================================
//- MIXINS - Navigation
//- ========================================

mixin rootSetPreviewButton(set, title)
  a(class=`index set ${set}` href=`index.html`) #{title}

mixin rootSizePreviewButton(type, size, title)
  a(class=`index set ${type}` href=`index.html`) #{title} #{size}

mixin setPreviewButton(set, title)
  a(class=`set ${set}` href=`${set}.html`) #{title}

mixin sizePreviewButton(size)
  a(class=`set ${mainSet}` href=`${mainSet}-${size}.html`) #{size}

//- ========================================
//- MIXINS - Controls
//- ========================================

mixin fileButton(fileNamePath, title)
  a(href=fileNamePath download=fileNamePath target='_blank' aria-label=title data-label='Download all banners')
    i.bi.bi-file-earmark-arrow-down

mixin downloadButton()
  .download-popup-wrapper
    button.download-main-btn(aria-label="Download" data-label="Download")
      i.bi.bi-file-earmark-arrow-down
    .download-popup-menu
      a.download-option(href=`${mainSet}-all-banners.zip` download=`${mainSet}-all-banners.zip` target="_blank")
        i.bi.bi-file-earmark-arrow-down
        span All Banners
      if showWholePackageDownload
        .dropdown-separator
        a.download-option.preview-option(href=`${mainSet}-whole-package.zip` download=`${mainSet}-whole-package.zip` target="_blank")
          i.bi.bi-archive
          span All Banners + Preview

mixin restartAllButton(title)
  a.restart-all(href='#' role='button' aria-label=title data-label='Restart')
    i.bi.bi-arrow-clockwise

mixin forwardAllButton(title)
  a.forward-all.is-playing(href='#' role='button' aria-label=title data-label='Pause')
    i.bi.bi-pause-fill

//- Footer mixin for complete control
mixin footerContent()
  | #{footerFullText}

//- ========================================
//- EFFECTS (Shimmer, Spinner, Shadows)
//- ========================================

//- Shimmer loading effect
- var lightShimmerColor = '#ECCCDB'
- var lightShimmerAlphaBase = 0.5
- var lightShimmerAlphaPeak = 1
- var lightShimmerBorderColor = '#000'
- var lightShimmerBorderAlpha = 0.75
- var darkShimmerColor = '#ECCCDB'
- var darkShimmerAlphaBase = 0.5
- var darkShimmerAlphaPeak = 1
- var darkShimmerBorderColor = '#ECCCDB'
- var darkShimmerBorderAlpha = 0.75

//- Spinner
- var lightSpinnerBorderColor = '#ECCCDB'
- var lightSpinnerTopColor = '#000'
- var darkSpinnerBorderColor = '#ECCCDB'
- var darkSpinnerTopColor = '#000'

//- Shadows
-
  var shadows = {
    bannerControl: '0 1px 6px rgba(0, 0, 0, 0.15)',
    bannerControlHover: '0 1px 6px rgba(0, 0, 0, 0.18)',
    dropdown: '0 4px 12px rgba(0, 0, 0, 0.15)',
    modal: '0 6px 16px rgba(0, 0, 0, 0.2)',
    header: '0 2px 10px 0 rgba(0, 0, 0, 0.1)',
    darkTheme: '0 4px 12px rgba(0, 0, 0, 0.4)',
    loadingShimmer: '0 1px 8px rgba(0,0,0,0.1)',
    loadingShimmerDark: '0 1px 8px rgba(0,0,0,0.4)',
    tooltip: '0 2px 8px rgba(0, 0, 0, 0.2)',
    focusRing: '0 0 0 2px rgba(56, 96, 151, 0.35), 0 2px 8px rgba(0, 0, 0, 0.15)',
    textSharp: '0 0 0.01px currentColor'
  };

//- Legacy shadow variables (for backward compatibility)
- var shadowBannerControl = shadows.bannerControl
- var shadowDropdown = shadows.dropdown
- var shadowModal = shadows.modal
- var shadowHeader = shadows.header
- var shadowBannerControlHover = shadows.bannerControlHover
- var shadowDarkTheme = shadows.darkTheme
- var shadowLoadingShimmer = shadows.loadingShimmer
- var shadowLoadingShimmerDark = shadows.loadingShimmerDark
- var shadowTooltip = shadows.tooltip
- var shadowFocusRing = shadows.focusRing
- var textShadowSharp = shadows.textSharp

//- Pre-computed shimmer RGB values (avoids runtime hex parsing)
-
  function hexToRgb(hex) {
    hex = String(hex || '#000');
    var isShort = hex.length === 4;
    var r = isShort ? parseInt(hex.charAt(1) + hex.charAt(1), 16) : parseInt(hex.slice(1,3), 16);
    var g = isShort ? parseInt(hex.charAt(2) + hex.charAt(2), 16) : parseInt(hex.slice(3,5), 16);
    var b = isShort ? parseInt(hex.charAt(3) + hex.charAt(3), 16) : parseInt(hex.slice(5,7), 16);
    return { r: r, g: g, b: b };
  }

- var lightShimmerRgb = hexToRgb(lightShimmerColor)
- var darkShimmerRgb = hexToRgb(darkShimmerColor)
- var lightShimmerBorderRgb = hexToRgb(lightShimmerBorderColor)
- var darkShimmerBorderRgb = hexToRgb(darkShimmerBorderColor)

//- Pre-computed rgba strings for shimmer effects
- var lightShimmerBase = 'rgba(' + lightShimmerRgb.r + ', ' + lightShimmerRgb.g + ', ' + lightShimmerRgb.b + ', ' + lightShimmerAlphaBase + ')'
- var lightShimmerPeak = 'rgba(' + lightShimmerRgb.r + ', ' + lightShimmerRgb.g + ', ' + lightShimmerRgb.b + ', ' + lightShimmerAlphaPeak + ')'
- var lightShimmerBorder = 'rgba(' + lightShimmerBorderRgb.r + ', ' + lightShimmerBorderRgb.g + ', ' + lightShimmerBorderRgb.b + ', ' + lightShimmerBorderAlpha + ')'
- var darkShimmerBase = 'rgba(' + darkShimmerRgb.r + ', ' + darkShimmerRgb.g + ', ' + darkShimmerRgb.b + ', ' + darkShimmerAlphaBase + ')'
- var darkShimmerPeak = 'rgba(' + darkShimmerRgb.r + ', ' + darkShimmerRgb.g + ', ' + darkShimmerRgb.b + ', ' + darkShimmerAlphaPeak + ')'
- var darkShimmerBorder = 'rgba(' + darkShimmerBorderRgb.r + ', ' + darkShimmerBorderRgb.g + ', ' + darkShimmerBorderRgb.b + ', ' + darkShimmerBorderAlpha + ')'

//- ========================================
//- TIMING
//- ========================================
-
  var timing = {
    bannerLoadTimeout: 4000,
    syncModeTimeout: 6000,
    bannerPollInterval: 100,
    bannerMaxPollAttempts: 40,
    noticeAutoHide: 10000,
    buttonFeedback: 200,
    shimmerDuration: '1.8s',
    transitionFast: '.15s',
    transitionMedium: '.25s',
    transitionSlow: '.3s'
  };

//- Legacy timing variables (for backward compatibility)
- var bannerLoadTimeoutMs = timing.bannerLoadTimeout
- var syncModeTimeoutMs = timing.syncModeTimeout
- var bannerPollIntervalMs = timing.bannerPollInterval
- var bannerMaxPollAttempts = timing.bannerMaxPollAttempts
- var noticeAutoHideMs = timing.noticeAutoHide
- var buttonFeedbackMs = timing.buttonFeedback
- var shimmerDuration = timing.shimmerDuration
- var transitionFast = timing.transitionFast
- var transitionMedium = timing.transitionMedium
- var transitionSlow = timing.transitionSlow
